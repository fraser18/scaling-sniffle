<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>ThreeJS Model</title>

        <script src="js/THREEx.WindowResize.js"></script>
        <script src="js/THREEx.FullScreen.js"></script>


        <script type="module">

        // Find the latest version by visiting https://unpkg.com/three. The URL will
        // redirect to the newest stable release.
        import * as THREE from 'https://unpkg.com/three/build/three.module.js';
        import {OrbitControls} from 'https://unpkg.com/three/examples/jsm/controls/OrbitControls.js';
        import {GLTFLoader} from 'https://unpkg.com/three/examples/jsm/loaders/GLTFLoader.js';

        //SCENE
        const scene = new THREE.Scene();

        // CAMERA
        const viewAngle = 70;
        const windowW = window.innerWidth;
        const windowH = window.innerHeight;
        const aspectRatio = windowW/windowH;
        const near = .1;
        const far = 100;

        const camera = new THREE.PerspectiveCamera(viewAngle, aspectRatio, near, far);
        // camera.position.z = 30; // back out of screen from origin (0,0,0)
        camera.position.set(-0.2, 0.5, -0.5); // x,y,z
        
                //SET VISIBLE HEIGHT
                // visible_height = 2 * Math.tan( ( Math.PI / 180 ) * camera.fov / 2 ) * (distance_from_camera);

        // RENDERER
        const renderer = new THREE.WebGLRenderer({antialias:true});
        renderer.setSize(windowW, windowH);
        document.body.appendChild(renderer.domElement);

        // white background - replace ffffff with any hex color
        renderer.setClearColor( 0xf0e7cc ); 

        const axesHelper = new THREE.AxesHelper( 5 );
        scene.add( axesHelper );

        // EVENTS
        THREEx.WindowResize(renderer, camera);
        THREEx.FullScreen.bindKey({charCode : "m".charCodeAt()});

        // LAMP MODEL
        const lamp = new GLTFLoader();
        lamp.load("lamp/scene.gltf", gltf=>{
            gltf.scene.position.z = 0.2; 
            gltf.scene.position.x = 0.12; 
        	scene.add( gltf.scene );
        }, undefined, error=>{
            console.error(error);
        });

        camera.lookAt(lamp);
        console.log(lamp);

        //ROCK MODEL
        const rock = new GLTFLoader();
        rock.load("rock/scene.gltf", gltf=>{
            // adjust scalar factor to match your scene scale
            gltf.scene.scale.multiplyScalar(1 / 200);
            gltf.scene.position.y = -0.158; 
            gltf.scene.position.z = 0.12; 
        	scene.add( gltf.scene );
        }, undefined, error=>{
            console.error(error);
        });



        const light2 = new THREE.PointLight(0xffffff);
        light2.position.set(lamp);
        scene.add(light2);

        // Load Light
        var ambientLight = new THREE.AmbientLight( 0x52514f );
        scene.add( ambientLight );

        // CONTROLS
        // const controls = new THREE.OrbitControls(camera, renderer.domElement);
        const controls = new OrbitControls(camera, renderer.domElement);


        // ANIMATION
        function render() {

            // cube.rotation.x += 0.005;
            // radians 5*Math.PI/180 // 5 degrees in radians
            // cube.rotation.y += 0.005;
            // cube.rotation.z += 0.005;

            // camera.rotation.y += .005;

            renderer.render(scene, camera);

            requestAnimationFrame(render);
        }
        render();


        </script>
		<meta name="viewport" content="width=device-width, user-scalable=no" />
		<style>
		body {margin:0px;}
		canvas {width:100%; height:100%;}
		</style>

    </head>
    <body>

    </body>
</html>
